<!--!--><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2021-02-01  <a class="commentCountImg" href="/2021/02/01/Mybatis/#comment-container"><span class="display-none-class">ab00e41ff0b5c3c2f05dfbb8104b6210</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="ab00e41ff0b5c3c2f05dfbb8104b6210">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>2 分钟  <i class="fas fa-pencil-alt"> </i>0.4 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Mybatis</h1><div class="content"><p>本文记录 Mybatis 学习笔记。</p>
<a id="more"></a>

<hr>
<h2 id="1-1-传递-pojo-对象"><a href="#1-1-传递-pojo-对象" class="headerlink" title="1.1 传递 pojo 对象"></a>1.1 传递 pojo 对象</h2><p>mybatis 使用 ognl 表达式解析对象字段的值，#{}或者${}括号中的值为 pojo 属性名称。</p>
<p><strong>OGNL 表达式</strong></p>
<table>
<thead>
<tr>
<th>Object</th>
<th>Graphic</th>
<th>Navigation</th>
<th>Language</th>
</tr>
</thead>
<tbody><tr>
<td>对象</td>
<td>图</td>
<td>导航</td>
<td>语言</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">它是通过对象的取值方法来获取数据，在写法上把get给省略了。</span><br><span class="line"></span><br><span class="line">e.g. 我们获取用户的名称</span><br><span class="line">    类中的写法：user.getUsername();</span><br><span class="line">    OGNL表达式写法：user.username</span><br></pre></td></tr></table></figure>
<p>Mybatis 中为什么能直接写 username，而不用 user.呢：<br>因为在 parameterType 中已经提供了属性所属的类，所以此时不需要写对象名。</p>
<hr>
<h2 id="1-2-resultMap-标签及内部标签参数"><a href="#1-2-resultMap-标签及内部标签参数" class="headerlink" title="1.2 resultMap 标签及内部标签参数"></a>1.2 resultMap 标签及内部标签参数</h2><p>resultMap 包含的元素：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--column不做限制，可以为任意表的字段，而property须为type 定义的pojo属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;唯一的标识&quot;</span> <span class="attr">type</span>=<span class="string">&quot;映射的pojo对象&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;表的主键字段，或者可以为查询语句中的别名字段&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;映射pojo对象的主键属性&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;表的一个字段（可以为任意表的一个字段）&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;映射到pojo对象的一个属性（须为type定义的pojo对象中的一个属性）&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- association是用于一对一和多对一，--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;pojo的一个对象属性&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;pojo关联的pojo对象&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;关联pojo对象对应表的主键字段&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;关联pojo对象的主键属性&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span>  <span class="attr">column</span>=<span class="string">&quot;任意表的字段&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;关联pojo对象的属性&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 而collection是用于一对多的关系  --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 集合中的property须为oftype定义的pojo对象的属性--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;pojo的集合属性&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;集合中的pojo对象&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;集合中pojo对象对应的表的主键字段&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;集合中pojo对象的主键属性&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;可以为任意表的字段&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;字段类型&quot;</span> <span class="attr">property</span>=<span class="string">&quot;集合中的pojo对象的属性&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kenhome/p/7764398.html">参考链接_Mybatis：resultMap 的使用总结</a></p>
<hr>
<h2 id="1-3-注解开发"><a href="#1-3-注解开发" class="headerlink" title="1.3 注解开发"></a>1.3 注解开发</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Select</span></span><br><span class="line"><span class="meta">@Insert</span></span><br><span class="line"><span class="meta">@Update</span></span><br><span class="line"><span class="meta">@Delete</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Results(id=&quot;userMap&quot;, value=&#123;</span></span><br><span class="line"><span class="meta">  //</span></span><br><span class="line"><span class="meta">  @Result(id=&quot;&quot;, property=&quot;&quot;, column=&quot;&quot;),</span></span><br><span class="line"><span class="meta">  //</span></span><br><span class="line"><span class="meta">  @Result(property=&quot;&quot;, column=&quot;&quot;),</span></span><br><span class="line"><span class="meta">  @Result(property=&quot;&quot;, column=&quot;&quot;)</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">  @Result(property = &quot;accounts&quot;,column = &quot;id&quot;, many = @Many(select = &quot;com.itheima.dao.IAccountDao.findAccountByUid&quot;,fetchType = FetchType.LAZY))</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">  @Result(property = &quot;user&quot;,column = &quot;uid&quot;,one=@One(select=&quot;com.itheima.dao.IUserDao.findById&quot;,fetchType= FetchType.EAGER))</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ResultMap(value=&#123;&quot;userMap&quot;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//此标签需要在SqlMapConfig.xml配置cacheEnabled</span></span><br><span class="line"><span class="meta">@CacheNamespace(blocking=true)</span></span><br></pre></td></tr></table></figure>
<hr>
<h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><p>1、<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013661958">Mybatis 入门</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Mybatis</p><p><a href="http://liu-we.gitee.io/2021/02/01/Mybatis/">http://liu-we.gitee.io/2021/02/01/Mybatis/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><a href="http://liu-we.gitee.io"><p>Lauwe</p></a></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-02-01</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-02-08</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 相关文章</span><br><span>  1.<a class="is-size-6" href="/2021/02/07/spring/" target="_blank">spring</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/02/04/github-%E5%B0%86%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93%E4%B8%8A%E4%BC%A0%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93-%E6%AD%A5%E9%AA%A4/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">github-将本地仓库上传到远程仓库-步骤</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/01/31/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E5%BC%95%E8%AE%BA/"><span class="level-item">深度学习引论</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: 'ab00e41ff0b5c3c2f05dfbb8104b6210',
            repo: 'blog_comment',
            owner: 'liuweide',
            clientID: '4771a4708023275de26d',
            clientSecret: '431a39d461485fc543eafc12ae4e844788558b64',
            admin: ["liuweide"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div>